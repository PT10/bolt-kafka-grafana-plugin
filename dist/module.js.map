{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../node_modules/tslib/tslib.es6.js","webpack:///./datasource.ts","webpack:///./datasourceUtils.ts","webpack:///./module.tsx","webpack:///./queryEditor.tsx","webpack:///external \"@grafana/runtime\"","webpack:///external \"@grafana/ui\"","webpack:///external \"lodash\"","webpack:///external \"react\""],"names":[],"mappings":"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","file":"module.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./module.tsx\");\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","/*\n *\n *  Copyright (C) 2019 Bolt Analytics Corporation\n *\n *      Licensed under the Apache License, Version 2.0 (the \"License\");\n *      you may not use this file except in compliance with the License.\n *      You may obtain a copy of the License at\n *\n *          http://www.apache.org/licenses/LICENSE-2.0\n *\n *      Unless required by applicable law or agreed to in writing, software\n *      distributed under the License is distributed on an \"AS IS\" BASIS,\n *      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *      See the License for the specific language governing permissions and\n *      limitations under the License.\n *\n */\n\nimport { DataQueryRequest, DataSourceApi, DataSourceInstanceSettings } from '@grafana/ui';\nimport { DataFrame } from '@grafana/data';\nimport { BoltQuery, BoltOptions } from './types';\nimport { getBackendSrv } from '@grafana/runtime';\nimport { Utils } from 'datasourceUtils';\n\nimport _ from 'lodash';\n\nexport class BoltDatasource extends DataSourceApi<BoltQuery, BoltOptions> {\n  data: DataFrame[] = [];\n  baseUrl: any = '';\n  anCollection = '';\n  jobConfigCollection = '';\n  rawCollection = '';\n  rawCollectionType = 'single';\n  timestampField = 'timestamp';\n  anomalyThreshold = 5;\n  topN = 10;\n  rawCollectionWindow = 1;\n  backendSrv: any;\n  qTemp: any;\n  $q: any;\n  templateSrv: any;\n\n  jobIdMappings: { dashboards: any; panels: any };\n\n  totalCount?: number = undefined;\n\n  facets: any = {};\n\n  constructor(instanceSettings: DataSourceInstanceSettings<BoltOptions>, $q: any, templateSrv: any) {\n    super(instanceSettings);\n\n    this.jobIdMappings = { dashboards: {}, panels: {} };\n    this.$q = $q;\n    this.templateSrv = templateSrv;\n    this.baseUrl = instanceSettings.url;\n\n    if (instanceSettings.jsonData) {\n    }\n\n    this.backendSrv = getBackendSrv();\n\n    this.buildValuesMap();\n  }\n\n  metricFindQuery(query: string) {\n    if (!query || query.length === 0) {\n      return Promise.resolve([]);\n    }\n\n    const pattern1 = /^getPageCount\\(\\$(.*),\\s*\\$(.*)\\)$/;\n    const pattern2 = /^(.*)\\((.*):\\s*(.*),\\s*(.*)\\)$/;\n\n    const matches1: any = query.match(pattern1);\n    const matches2: any = query.match(pattern2);\n\n    if (matches1 && matches1.length === 3) {\n      return this.getTotalCount(matches1);\n    } else if (matches2 && matches2.length === 5) {\n      return this.getFields(matches2);\n    } else {\n      return Promise.reject({\n        status: 'error',\n        message: 'Supported options are: <collection_name>(<filter>,<field_name>) and getPageCount($PageSize, $Search)',\n        title: 'Error while adding the variable',\n      });\n    }\n  }\n\n  query(options: DataQueryRequest<BoltQuery>): any {\n    const targetPromises = options.targets\n      .map((query: BoltQuery) => {\n        // If user has added page number variable the count is computed in template init (metricFindQuery) No need to fire the Query on solr again\n\n        /*const collection = _.keys(this.facets).includes(query.queryType) ? this.anCollection : query.collection;\n        if (!query.query) {\n          return Promise.resolve([]);\n        }\n\n        let q = this.getQueryString(query, options);\n\n        // Provision for empty series filter\n        if (q.match(/AND\\s*$/)) {\n          q = q.slice(0, q.lastIndexOf('AND'));\n        }\n\n        let start = this.templateSrv.replace(query.start, options.scopedVars);\n        let numRows = this.templateSrv.replace(query.numRows.toString(), options.scopedVars) || 100;\n        if (query.queryType === 'chart') {\n          numRows = 1000; // Cursor page size\n        } else {\n          numRows = ['count', 'facet'].includes(query.queryType) ? 0 : numRows;\n        }\n        numRows = Number(numRows);\n        start = numRows * Number(start);\n\n        const startTime = options.range.from.toISOString();\n        const endTime = options.range.to.toISOString();\n\n        const solrQueryBody: any = {};\n        solrQueryBody.query = q;\n\n        // Add basic query fields\n        const solrQueryParams: any = {\n          fq: this.timestampField + ':[' + startTime + ' TO ' + endTime + ']',\n          fl: this.timestampField + (query.fl ? ',' + query.fl : ''),\n          rows: numRows,\n          start: start,\n        };\n\n        // Add fields specific to raw logs and single stat on raw logs\n        if (query.queryType === 'rawlogs' || query.queryType === 'count' || query.queryType === 'slowQueries') {\n          solrQueryParams['collectionWindow'] = this.rawCollectionWindow;\n          solrQueryParams['startTime'] = startTime;\n          solrQueryParams['endTime'] = endTime;\n          solrQueryParams['getRawMessages'] = true;\n        }\n\n        if (query.queryType === 'slowQueries') {\n          solrQueryParams['rex.message.q'] = query.rexQuery;\n          solrQueryParams['rex.message.outputfields'] = query.rexOutFields;\n        }\n\n        // Set facet fields for heatmap, linechart and count (only in case of multi collection mode due to plugin numFound limitation)\n        // TODO: Find out why numFound is returned only after specifying the facet\n        if (query.queryType === 'count' && this.rawCollectionType === 'multi') {\n          solrQueryParams['facet'] = true;\n          solrQueryParams['facet.field'] = 'id';\n          solrQueryParams['facet.limit'] = 2;\n        } else if (_.keys(this.facets).includes(query.queryType)) {\n          const aggInterval = this.templateSrv.replace(query.aggInterval, options.scopedVars) || '+1HOUR';\n          solrQueryParams['facet'] = true;\n          solrQueryParams['json.facet'] = this.facets[query.queryType]\n            .replace('__AGG_INTERVAL__', aggInterval)\n            .replace('__START_TIME__', startTime)\n            .replace('__END_TIME__', endTime)\n            .replace(/__TOPN__/g, this.topN)\n            .replace('__SCORE_THRESHOLD__', this.anomalyThreshold);\n        } else {\n          delete solrQueryParams['facet'];\n          delete solrQueryParams['json.facet'];\n        }\n\n        // for cursor to work. Will sort by ts later\n        if (query.queryType === 'chart') {\n          solrQueryParams['sort'] = 'id asc';\n        } else if (query.sortField) {\n          solrQueryParams['sort'] =\n            this.templateSrv.replace(query.sortField, options.scopedVars) + ' ' + this.templateSrv.replace(query.sortOrder, options.scopedVars);\n        }\n      */\n\n        let myQuery = query.query;\n        // /topics/$TOPICNAME/partitions/0/messages?timestamp=$FROM_TIME&count=288\n        myQuery = myQuery.replace('$TOPICNAME', query.topicName); //.replace('$FROM_TIME',options.range.from.toISOString());\n\n        const kafkaQueryParams = {\n          timestamp: options.range.from.toISOString(),\n          count: 2400,\n        }; //?timestamp=$FROM_TIME&count=288'\n\n        const httpOpts = {\n          url: this.baseUrl + myQuery,\n          method: 'GET',\n          headers: { Accept: 'application/vnd.kafka.v1+json' },\n          params: kafkaQueryParams,\n          //data: solrQueryBody, // There can be a big query due to long jobIds and hence it is sent in post request body\n        };\n\n        return this.sendQueryRequest([], httpOpts, query, 'main'); // cursor mark or charts\n      })\n      .values();\n\n    const series: any = {};\n    const resultSeries: any[] = [];\n\n    return Promise.all(targetPromises).then(responses => {\n      responses.forEach(resp => {\n        resp.forEach((r: any) => {\n          r.data.forEach((s: any) => {\n            if (s.type === 'table') {\n              resultSeries.push(s);\n            } else {\n              series[s.target] = !series[s.target] ? s.datapoints : series[s.target].concat(s.datapoints);\n            }\n          });\n        });\n      });\n\n      _.keys(series).forEach(key => {\n        resultSeries.push({\n          target: key,\n          datapoints: series[key].sort((a: any, b: any) => {\n            return a[1] - b[1];\n          }),\n        });\n      });\n\n      const result = {\n        data: resultSeries,\n      };\n\n      return result;\n    });\n  }\n\n  testDatasource() {\n    //GET  \"http://localhost:8082/topics\"\n    const options = {\n      url: this.baseUrl + '/topics',\n      method: 'GET',\n    };\n    return this.backendSrv\n      .datasourceRequest(options)\n      .then((response: any) => {\n        if (response.status === 200) {\n          return {\n            status: 'success',\n            message: 'Data source is working',\n            title: 'Success',\n          };\n        } else {\n          return {\n            status: 'error',\n            message: 'Data source is NOT working',\n            title: 'Error',\n          };\n        }\n      })\n      .catch((error: any) => {\n        return {\n          status: 'error',\n          message: error.status + ': ' + error.statusText,\n          title: 'Error',\n        };\n      });\n  }\n\n  sendQueryRequest(respArr: any[], options: any, query: BoltQuery, requestType: any, cursor?: any) {\n    /*params.method = 'POST';\n    params.headers = { 'Content-Type': 'application/json' };*/\n\n    if (cursor) {\n      options.params['cursorMark'] = cursor;\n    }\n    //let fromTimestamp = 0;\n    if (requestType === 'main') {\n      if (query.topicName === 'Network_Traffic_v1' && this.templateSrv.timeRange.to - this.templateSrv.timeRange.from > 1800 * 1000) {\n        // if request is to get data more than half hour\n        const fromTimestamp = this.templateSrv.timeRange.to.toDate();\n        fromTimestamp.setTime(fromTimestamp.getTime() - 1800000);\n        //this.templateSrv.timeRange.from = this.templateSrv.timeRange.to - 1800 * 1000;\n\n        const kafkaQueryParams = {\n          timestamp: fromTimestamp,\n          count: 2400,\n        }; //?timestamp=$FROM_TIME&count=288'\n\n        options.params = kafkaQueryParams;\n      }\n    }\n\n    return this.backendSrv\n      .datasourceRequest(options)\n      .then((response: any) => {\n        if (response.status === 200) {\n          //const groupMap = this.jobIdMappings;\n\n          const processedData = Utils.processResponse(response, this.templateSrv);\n\n          respArr.push(processedData);\n\n          if (requestType === 'main') {\n            if (query.topicName === 'Network_Traffic_v1' && this.templateSrv.timeRange.to - this.templateSrv.timeRange.from > 1800 * 1000) {\n              // if request is to get data more than half hour\n              //this.templateSrv.timeRange.from = this.templateSrv.timeRange.to;\n              //this.templateSrv.timeRange.to = this.templateSrv.timeRange.to - 1800 * 1000;\n\n              let myQuery = query.query;\n              myQuery = myQuery.replace('$TOPICNAME', 'Network_Traffic_Hourly'); //.replace('$FROM_TIME',options.range.from.toISOString());\n              options.url = this.baseUrl + myQuery;\n              const kafkaQueryParams = {\n                timestamp: this.templateSrv.timeRange.from.toISOString(),\n                count: 2400,\n              }; //?timestamp=$FROM_TIME&count=288'\n\n              options.params = kafkaQueryParams;\n\n              return this.sendQueryRequest(respArr, options, query, 'sub');\n            }\n          }\n\n          return respArr;\n        } else {\n          return Promise.reject([\n            {\n              status: 'error',\n              message: 'Error',\n              title: 'Error',\n            },\n          ]);\n        }\n      })\n      .catch((error: any) => {\n        return Promise.reject([\n          {\n            status: 'error',\n            message: error.status + ': ' + error.statusText,\n            title: 'Error while accessing data',\n          },\n        ]);\n      });\n  }\n\n  getFields(matches: any) {\n    const collection = matches[1];\n    const filterField = matches[2];\n    let filterFieldVal = matches[3].replace('$', '');\n    const field = matches[4];\n\n    const variable = this.templateSrv.variables.find((v: any) => v.name === filterFieldVal);\n    if (variable) {\n      let resolvedFilterValues: string[] = [];\n      if (typeof variable.current.value !== 'object') {\n        resolvedFilterValues.push(variable.current.value);\n      } else {\n        resolvedFilterValues = variable.current.value;\n      }\n\n      if (resolvedFilterValues[0] === '$__all') {\n        if (!variable || !variable.options || variable.options.length < 2) {\n          filterFieldVal = '';\n        } else {\n          const allValues = variable.options\n            .slice(1)\n            .map((opt: any) => {\n              let fieldName = opt.text;\n              if (filterField === 'jobId') {\n                Object.keys(this.jobIdMappings.panels).forEach((k: string) => {\n                  if (this.jobIdMappings.panels[k] === fieldName) {\n                    fieldName = k;\n                  }\n                });\n              }\n              return fieldName;\n            })\n            .join(' OR ');\n          filterFieldVal = '(' + allValues + ')';\n        }\n      } else {\n        resolvedFilterValues = resolvedFilterValues.map(dashboard => {\n          let fieldName = dashboard;\n          if (filterField === 'jobId') {\n            Object.keys(this.jobIdMappings.panels).forEach((k: string) => {\n              if (this.jobIdMappings.panels[k] === fieldName) {\n                fieldName = k;\n              }\n            });\n          }\n          return fieldName;\n        });\n        filterFieldVal = '(' + resolvedFilterValues.join(' OR ') + ')';\n      }\n    }\n\n    const url = this.baseUrl + '/' + collection + '/select?facet=true&facet.field=' + field + '&wt=json&rows=0&facet.limit=-1';\n    const params = {\n      url: url,\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      data: { query: filterField + ': ' + filterFieldVal },\n    };\n    return this.backendSrv.datasourceRequest(params).then((response: any) => {\n      if (response.status === 200) {\n        return Utils.mapToTextValue(response);\n      } else {\n        return Promise.reject([\n          {\n            status: 'error',\n            message: 'Error',\n            title: 'Error',\n          },\n        ]);\n      }\n    });\n  }\n\n  buildValuesMap() {\n    const url = this.baseUrl + '/' + this.jobConfigCollection + '/select?q=jobId:*&fl=jobId,name,searchGroup&rows=10000';\n    const params = {\n      url: url,\n      method: 'GET',\n    };\n    return this.backendSrv.datasourceRequest(params).then((response: any) => {\n      if (response.status === 200) {\n        this.jobIdMappings = { dashboards: {}, panels: {} };\n        response.data.response.docs.forEach((doc: any) => {\n          this.jobIdMappings.dashboards[doc.jobId] = '\"' + doc.searchGroup[0] + '\"';\n          this.jobIdMappings.panels[doc.jobId] = '\"' + doc.name + '\"';\n        });\n      }\n    });\n  }\n\n  getTotalCount(matches: any) {\n    const pageSizeVar = matches[1];\n    const searchVar = matches[2];\n\n    const searchQuery = this.templateSrv.variables.find((v: any) => v.name === searchVar);\n    if (!searchQuery) {\n      this.totalCount = undefined;\n      return Promise.reject({\n        status: 'error',\n        message: '$' + searchVar + ' not found in variables',\n        title: 'Error while adding the variable',\n      });\n    }\n\n    const pageSize = this.templateSrv.variables.find((v: any) => v.name === pageSizeVar);\n    if (!pageSize) {\n      this.totalCount = undefined;\n      return Promise.reject({\n        status: 'error',\n        message: '$' + pageSizeVar + ' not found in variables',\n        title: 'Error while adding the variable',\n      });\n    }\n\n    const params = {\n      q: searchQuery.query,\n      rows: 0,\n      fq: 'timestamp:[' + this.templateSrv.timeRange.from.toJSON() + ' TO ' + this.templateSrv.timeRange.to.toJSON() + ']',\n      getRawMessages: true,\n      startTime: this.templateSrv.timeRange.from.toJSON(),\n      endTime: this.templateSrv.timeRange.to.toJSON(),\n      facet: true,\n      'facet.field': 'id',\n      'facet.limit': 2,\n    };\n\n    const options = {\n      url: this.baseUrl + '/' + this.rawCollection + '/select?wt=josn',\n      method: 'GET',\n      params: params,\n    };\n\n    return this.backendSrv.datasourceRequest(options).then((data: any) => {\n      this.totalCount = data.data.response.numFound;\n      return Utils.getFirstAndLastNResults(data, pageSize);\n    });\n  }\n\n  getQueryString(query: BoltQuery, options: DataQueryRequest<BoltQuery>) {\n    let q: string;\n    const queryStr = this.templateSrv.replace(query.query, options.scopedVars);\n    const matches = queryStr.match(/__dashboard__:\\s*(.*)/);\n    let matches2 = queryStr.match(/__panel__:\\s*(.*) AND .*/);\n    if (!matches2) {\n      matches2 = queryStr.match(/__panel__:\\s*(.*)/);\n    }\n\n    if (matches && matches.length === 2) {\n      // Dashboard case\n      const dahsboardName: string = matches[1];\n      if (dahsboardName === '*') {\n        q = queryStr.replace('__dashboard__', 'jobId');\n      } else if (dahsboardName.startsWith('{')) {\n        // All option\n        const jobIdList: any[] = [];\n        const dashboards = dahsboardName\n          .replace('{', '')\n          .replace('}', '')\n          .split(',');\n\n        dashboards.forEach(dashboard => {\n          const jobId: string[] = Object.keys(this.jobIdMappings.dashboards).filter(jobId => {\n            return this.jobIdMappings.dashboards[jobId] === dashboard;\n          });\n\n          if (jobId) {\n            jobId.forEach(job => jobIdList.push(job));\n          }\n        });\n\n        const jobIdStr = '(' + jobIdList.join(' OR ') + ')';\n        q = queryStr.replace('__dashboard__', 'jobId').replace(dahsboardName, jobIdStr);\n      } else {\n        // particular option\n        const jobIdList: string[] = Object.keys(this.jobIdMappings.dashboards).filter((jobId: string) => {\n          return this.jobIdMappings.dashboards[jobId] === dahsboardName;\n        });\n\n        const jobIdStr = '( ' + jobIdList.join(' OR ') + ' )';\n        q = queryStr.replace('__dashboard__', 'jobId').replace(dahsboardName, jobIdStr);\n      }\n      q = Utils.queryBuilder(q);\n    } else if (matches2 && matches2.length === 2) {\n      // Panel case\n      const panelName: string = matches2[1];\n\n      if (panelName === '*') {\n        q = queryStr.replace('__panel__', 'jobId');\n      } else if (panelName.startsWith('{')) {\n        // All option\n        const jobIdList: any[] = [];\n        const panels = panelName\n          .replace('{', '')\n          .replace('}', '')\n          .split(',');\n\n        panels.forEach(panel => {\n          const jobId = Object.keys(this.jobIdMappings.panels).filter(jobId => {\n            return this.jobIdMappings.panels[jobId] === panel;\n          });\n\n          if (jobId) {\n            jobIdList.push(jobId);\n          }\n        });\n\n        const jobIdStr = '(' + jobIdList.join(' OR ') + ')';\n        q = queryStr.replace('__panel__', 'jobId').replace(panelName, jobIdStr);\n      } else {\n        // particular option\n        const jobIdList: string[] = Object.keys(this.jobIdMappings.panels).filter((jobId: string) => {\n          return this.jobIdMappings.panels[jobId] === panelName;\n        });\n\n        const jobIdStr = '( ' + jobIdList.join(' OR ') + ' )';\n        q = queryStr.replace('__panel__', 'jobId').replace(panelName, jobIdStr);\n      }\n      q = Utils.queryBuilder(q);\n    } else {\n      q = Utils.queryBuilder(queryStr);\n    }\n\n    return q;\n  }\n}\n\nexport default BoltDatasource;\n","/*\n *\n *  Copyright (C) 2019 Bolt Analytics Corporation\n *\n *      Licensed under the Apache License, Version 2.0 (the \"License\");\n *      you may not use this file except in compliance with the License.\n *      You may obtain a copy of the License at\n *\n *          http://www.apache.org/licenses/LICENSE-2.0\n *\n *      Unless required by applicable law or agreed to in writing, software\n *      distributed under the License is distributed on an \"AS IS\" BASIS,\n *      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *      See the License for the specific language governing permissions and\n *      limitations under the License.\n *\n */\n\nexport class Utils {\n  static processResponse(response: any, templateSrv: any) {\n    const data = response.data;\n    let seriesList: any[] = [];\n    const actualSentSeries: any[] = [];\n    const actualReceivedcSeries: any[] = [];\n\n    const sentDataMap: any = {};\n    const receivedDataMap: any = {};\n    const hostMap: any = {};\n    const ruleMap: any = {};\n    const deniedDestinationMap: any = {};\n\n    const fromTime = templateSrv.timeRange.from;\n    const toTime = templateSrv.timeRange.to;\n\n    data.forEach((dataPoint: any) => {\n      const decodedValue: any = JSON.parse(atob(dataPoint.value));\n      const d: Date = new Date(decodedValue.timestamp);\n      const ts = d.getTime();\n\n      if (ts < fromTime || ts > toTime) {\n        return;\n      }\n\n      if (decodedValue['jobId'] === 'Denied_Hosts') {\n        const hostName = decodedValue['DENIEDHOST'];\n        if (!Object.keys(hostMap).includes(hostName)) {\n          hostMap[hostName] = [];\n        }\n        hostMap[hostName].push([decodedValue['COUNT'], ts]);\n      } else if (decodedValue['jobId'] === 'rule') {\n        const ruleName = decodedValue['RULE'];\n        if (!Object.keys(ruleMap).includes(ruleName)) {\n          ruleMap[ruleName] = [];\n        }\n        ruleMap[ruleName].push([decodedValue['COUNT'], ts]);\n      } else if (decodedValue['jobId'] === 'Denied_Destination_Cities_v1') {\n        const cityName = decodedValue['DESTINATION_CITIES'];\n        if (!Object.keys(deniedDestinationMap).includes(cityName)) {\n          deniedDestinationMap[cityName] = [];\n        }\n        deniedDestinationMap[cityName].push([decodedValue['COUNT'], ts]);\n      } else {\n        sentDataMap[ts] = decodedValue['Bytes_Sent'];\n        receivedDataMap[ts] = decodedValue['Bytes_Received'];\n      }\n    });\n\n    if (Object.keys(hostMap).length > 0) {\n      Object.keys(hostMap).forEach(host => {\n        seriesList.push({\n          target: host,\n          datapoints: hostMap[host],\n        });\n      });\n    } else if (Object.keys(ruleMap).length > 0) {\n      Object.keys(ruleMap).forEach(rule => {\n        seriesList.push({\n          target: rule,\n          datapoints: ruleMap[rule],\n        });\n      });\n    } else if (Object.keys(deniedDestinationMap).length > 0) {\n      Object.keys(deniedDestinationMap).forEach(city => {\n        seriesList.push({\n          target: city,\n          datapoints: deniedDestinationMap[city],\n        });\n      });\n    } else {\n      Object.keys(sentDataMap).forEach((ts: any) => {\n        actualSentSeries.push([sentDataMap[ts], ts]);\n      });\n\n      Object.keys(receivedDataMap).forEach((ts: any) => {\n        actualReceivedcSeries.push([receivedDataMap[ts], ts]);\n      });\n\n      seriesList.push({\n        target: 'Bytes_sent',\n        datapoints: actualSentSeries,\n      });\n\n      seriesList.push({\n        target: 'Bytes_received',\n        datapoints: actualReceivedcSeries,\n      });\n    }\n\n    // Process line chart facet response\n    /*\n    if (data.facets && data.facets.lineChartFacet) {\n      seriesList = [];\n      let sortBaselineSeries: any[] = [];\n      const jobs = data.facets.lineChartFacet.buckets;\n      jobs.forEach((job: any) => {\n        const partFields = job.group.buckets;\n        partFields.forEach((partField: any) => {\n          const dashboardName = groupMap.dashboards[job.val] ? groupMap.dashboards[job.val] + '_' : '';\n          const panelName = groupMap.panels[job.val] ? groupMap.panels[job.val] : '';\n          let jobIdWithPartField: string = dashboardName + panelName;\n          const partFieldJson = JSON.parse(partField.val);\n          Object.keys(partFieldJson).forEach(key => {\n            if (key === 'aggr_field') {\n              return;\n            }\n            jobIdWithPartField += '_' + key + '_' + partFieldJson[key];\n          });\n          jobIdWithPartField += '_' + partFieldJson.aggr_field;\n\n          if (jobIdWithPartField.startsWith('_')) {\n            jobIdWithPartField = jobIdWithPartField.slice(1);\n          }\n\n          const buckets = partField.timestamp.buckets;\n          const actualSeries: any[] = [];\n          const scoreSeries: any[] = [];\n          const anomalySeries: any[] = [];\n          const expectedSeries: any[] = [];\n          buckets.forEach((timeBucket: any) => {\n            const d: Date = new Date(timeBucket.val);\n            const ts = d.getTime();\n            const actual = timeBucket.actual.buckets[0].val;\n            let score = timeBucket.score.buckets[0].val;\n            let anomaly = timeBucket.anomaly.buckets[0].val;\n            const expected = timeBucket.expected.buckets[0].val;\n            if (score >= anomalyThreshold && anomaly) {\n              anomaly = actual;\n            } else {\n              anomaly = null;\n              score = null;\n            }\n            actualSeries.push([actual, ts]);\n            scoreSeries.push([score, ts]);\n            anomalySeries.push([anomaly, ts]);\n            expectedSeries.push([expected, ts]);\n          });\n\n          seriesList.push({\n            target: jobIdWithPartField + ' actual',\n            datapoints: actualSeries,\n          });\n          seriesList.push({\n            target: jobIdWithPartField + ' score',\n            datapoints: scoreSeries,\n          });\n          //Sort baseline is score value.\n          sortBaselineSeries.push({\n            target: jobIdWithPartField,\n            datapoints: scoreSeries,\n          });\n          seriesList.push({\n            target: jobIdWithPartField + ' anomaly',\n            datapoints: anomalySeries,\n          });\n          seriesList.push({\n            target: jobIdWithPartField + ' expected',\n            datapoints: expectedSeries,\n          });\n        });\n      });\n      sortBaselineSeries = this.sortList(sortBaselineSeries, topN);\n      seriesList = this.getSortedSeries(seriesList, sortBaselineSeries, indvAnOutField);\n    } else if (data.facets && data.facets.correlation) {\n      seriesList = [];\n      const jobs = data.facets.correlation.buckets;\n\n      let baseline: number[] = [];\n      // Find baseline series and populate base metric\n      jobs.forEach((job: any) => {\n        if (job.val === correlationMetric) {\n          const partFields = job.group.buckets;\n          partFields.forEach((partField: any) => {\n            const partFieldJson = JSON.parse(partField.val);\n            const jobIdWithPartField = partFieldJson.aggr_field;\n            const buckets = partField.timestamp.buckets;\n            const actualSeries: any[] = [];\n            buckets.forEach((timeBucket: any) => {\n              const d: Date = new Date(timeBucket.val);\n              const ts = d.getTime();\n              const actual = timeBucket.actual.buckets[0].val;\n\n              actualSeries.push([actual, ts]);\n              baseline.push(actual);\n            });\n\n            seriesList.push({\n              target: jobIdWithPartField,\n              datapoints: actualSeries,\n            });\n          });\n        }\n      });\n\n      baseline = Utils.getStdDev(baseline);\n\n      // Populate other metrics and find deviation from baseline\n      jobs.forEach((job: any) => {\n        if (job.val !== correlationMetric) {\n          const partFields = job.group.buckets;\n          partFields.forEach((partField: any) => {\n            const partFieldJson = JSON.parse(partField.val);\n            const jobIdWithPartField = partFieldJson.aggr_field;\n            const buckets = partField.timestamp.buckets;\n            const actualSeries: any[] = [];\n\n            let compare: any[] = [];\n            buckets.forEach((timeBucket: any) => {\n              const d: Date = new Date(timeBucket.val);\n              const ts = d.getTime();\n              const actual = timeBucket.actual.buckets[0].val;\n              compare.push(actual);\n              actualSeries.push([actual, ts]);\n            });\n\n            compare = Utils.getStdDev(compare);\n            const dev = this.findCorrelation(baseline, compare);\n\n            seriesList.push({\n              target: jobIdWithPartField + ': ' + dev.toFixed(3),\n              datapoints: actualSeries,\n            });\n          });\n        }\n      });\n    } else if (data.facets && data.facets.heatMapByPartFieldsFacet) {\n      // Heatmap\n      seriesList = [];\n      const jobs = data.facets.heatMapByPartFieldsFacet.buckets;\n      jobs.forEach((job: any) => {\n        const partBuckets = job.partField.buckets;\n        partBuckets.forEach((partField: any) => {\n          const score: number = partField.s;\n          const dayBuckets = partField.Day0.buckets;\n          const seriesData: any[] = [];\n          dayBuckets.forEach((bucket: any) => {\n            const d: Date = new Date(bucket.val);\n            if (bucket.score != null && bucket.score.score != null) {\n              seriesData.push([bucket.score.score, d.getTime()]);\n            } else {\n              seriesData.push([0, d.getTime()]);\n            }\n          });\n          // Derive series name from part fields\n          const partFieldJson = JSON.parse(partField.val);\n          const dashboardName = groupMap.dashboards[job.val] ? groupMap.dashboards[job.val] + '_' : '';\n          const panelName = groupMap.panels[job.val] ? groupMap.panels[job.val] : '';\n          let seriesName = dashboardName + panelName;\n          Object.keys(partFieldJson).forEach(key => {\n            if (key === 'aggr_field') {\n              return;\n            }\n            seriesName += '_' + key + '_' + partFieldJson[key];\n          });\n          seriesName += '_' + partFieldJson.aggr_field;\n\n          if (seriesName.startsWith('_')) {\n            seriesName = seriesName.slice(1);\n          }\n\n          seriesList.push({\n            target: seriesName,\n            datapoints: seriesData,\n            score: score,\n          });\n        });\n      });\n\n      seriesList = this.sortList(seriesList, topN).reverse(); // reverse because heatmap starts from bottom\n    } else if (data.facets && data.facets.heatMapFacet) {\n      // Heatmap\n      seriesList = [];\n      const jobs = data.facets.heatMapFacet.buckets;\n      jobs.forEach((job: any) => {\n        const dayBuckets = job.Day0.buckets;\n        const seriesData: any[] = [];\n        dayBuckets.forEach((bucket: any) => {\n          const d: Date = new Date(bucket.val);\n          if (bucket.score != null && bucket.score.score != null) {\n            seriesData.push([bucket.score.score, d.getTime()]);\n          } else {\n            seriesData.push([0, d.getTime()]);\n          }\n        });\n\n        const dashboardName = groupMap.dashboards[job.val] ? groupMap.dashboards[job.val] + '_' : '';\n        const panelName = groupMap.panels[job.val] ? groupMap.panels[job.val] : '';\n        const targetName = dashboardName + panelName;\n        seriesList.push({\n          jobId: job.val,\n          target: targetName !== '' ? targetName : job.val,\n          datapoints: seriesData,\n        });\n      });\n\n      if (grouppingEmabled) {\n        seriesList = Utils.getGrouppedResults(seriesList, groupMap);\n      }\n\n      seriesList = this.sortList(seriesList).reverse(); // reverse because heatmap starts from bottom\n    } else if (format === 'rawlogs' || format === 'slowQueries') {\n      // Table\n      const columns: any[] = [];\n      const rows: any[] = [];\n      seriesList = {};\n      let index = 0;\n      if (data && data.response && data.response.docs) {\n        data.response.docs.forEach((item: any) => {\n          const row = [];\n          for (const property in item) {\n            // Set columns\n            if (index === 0 && item.hasOwnProperty(property)) {\n              if (property === timeField) {\n                columns.unshift({ type: 'time', text: 'Time' });\n              } else {\n                columns.push({ type: 'string', text: property });\n              }\n            }\n            // Set rows\n            if (property === timeField) {\n              const d: Date = new Date(item[timeField]);\n\n              const ts = d.getTime(); //.unix() * 1000;\n              row.unshift(ts);\n            } else {\n              row.push(item[property]);\n            }\n          }\n          index++;\n          rows.push(row);\n        });\n      }\n      seriesList = [\n        {\n          type: 'table',\n          columns: columns,\n          rows: rows,\n        },\n      ];\n    } else if (format === 'count') {\n      seriesList = [];\n      const numResults = data && data.response && data.response.numFound ? data.response.numFound : 0;\n      seriesList.push({\n        target: 'Number of docs',\n        datapoints: [[numResults, '']],\n      });\n    } else if (format === 'chart') {\n      // Charts\n      seriesList = [];\n      data.response.docs.forEach((item: any) => {\n        for (const property in item) {\n          if (item.hasOwnProperty(property) && property !== timeField) {\n            if (typeof series[property] === 'undefined') {\n              series[property] = [];\n            }\n            const date = new Date(item[timeField]);\n            const ts = date.getTime();\n            series[property].push([item[property] || 0, ts]);\n          }\n        }\n      });\n      for (const property in series) {\n        seriesList.push({\n          target: property,\n          datapoints: series[property].sort((a: any, b: any) => {\n            return a[1] - b[1];\n          }),\n        });\n      }\n    }*/\n\n    if (!seriesList) {\n      seriesList = [];\n    }\n    return {\n      data: seriesList,\n    };\n  }\n\n  static getGrouppedResults(seriesList: [], groupMap: any) {\n    const groupSeriesList: any = {};\n    const seriesListOutput: any[] = [];\n\n    seriesList.forEach((series: any) => {\n      const jobId = series.jobId;\n      const datapoints: [] = series.datapoints;\n      let dashboardName: string = groupMap.dashboards[jobId];\n\n      if (!dashboardName) {\n        dashboardName = jobId;\n      }\n      if (!groupSeriesList[dashboardName]) {\n        groupSeriesList[dashboardName] = [];\n      }\n\n      datapoints.forEach((data, index) => {\n        if (!groupSeriesList[dashboardName][index] || groupSeriesList[dashboardName][index][0] < data[0]) {\n          groupSeriesList[dashboardName][index] = data;\n        }\n      });\n    });\n\n    Object.keys(groupSeriesList).forEach((dashboard: string) => {\n      seriesListOutput.push({\n        target: dashboard,\n        datapoints: groupSeriesList[dashboard],\n      });\n    });\n\n    return seriesListOutput;\n  }\n\n  static mapToTextValue(result: any) {\n    if (result.data && result.data.collections) {\n      return result.data.collections.map((collection: string) => {\n        return {\n          text: collection,\n          value: collection,\n        };\n      });\n    }\n    if (result.data && result.data.facet_counts) {\n      const ar: any[] = [];\n      for (const key in result.data.facet_counts.facet_fields) {\n        if (!result.data.facet_counts.facet_fields.hasOwnProperty(key)) {\n          continue;\n        }\n\n        const array = result.data.facet_counts.facet_fields[key];\n        for (let i = 0; i < array.length; i += 2) {\n          // take every second element\n          if (\n            array[i + 1] > 0 &&\n            !ar.find(ele => {\n              return ele.text === array[i];\n            })\n          ) {\n            let text = array[i];\n            const detectorPatternMatches = text.match(/\\( Function: .* Field: (.*) \\)/);\n            if (detectorPatternMatches) {\n              text = detectorPatternMatches[1];\n            }\n\n            if (text) {\n              text = text\n                .replace(/\\\"/g, '\\\\\"')\n                .replace(/{/g, '\\\\{')\n                .replace(/}/g, '\\\\}');\n            }\n            ar.push({\n              text: '\"' + text + '\"',\n              expandable: false,\n            });\n          }\n        }\n      }\n      return ar;\n    }\n    if (result.data) {\n      return result.data\n        .split('\\n')[0]\n        .split(',')\n        .map((field: string) => {\n          return {\n            text: field,\n            value: field,\n          };\n        });\n    }\n  }\n\n  static getFirstAndLastNResults(data: any, pageSize: any) {\n    let arr: any[] = [];\n    if (data && data.data && data.data.response) {\n      for (let i = 0; i < Math.round(data.data.response.numFound / Number(pageSize.query)); i++) {\n        arr.push(i);\n      }\n    }\n    arr = arr.map(ele => {\n      return {\n        text: ele + 1,\n        value: ele,\n      };\n    });\n    const firstNResults = arr.slice(0, 10);\n    const lastNResults = arr.splice(arr.length - 11, arr.length - 1);\n\n    if (firstNResults.length === 0 && lastNResults.length === 0) {\n      return [\n        {\n          text: 0,\n          value: 0,\n        },\n      ];\n    }\n\n    return firstNResults.concat(lastNResults);\n  }\n\n  static sortList(seriesList: any[], top?: number) {\n    seriesList.sort((a: any, b: any) => {\n      let totalA = 0;\n      let totalB = 0;\n      if (a.datapoints && b.datapoints) {\n        a.datapoints.map((d: any) => {\n          totalA += d[0];\n        });\n        b.datapoints.map((d: any) => {\n          totalB += d[0];\n        });\n      } else {\n        return 0;\n      }\n\n      return totalB - totalA;\n      // return b.score - a.score;\n    });\n\n    if (top) {\n      seriesList = seriesList.slice(0, top);\n    }\n\n    return seriesList;\n  }\n\n  static getSortedSeries(seriesToSort: any[], baselineSeries: any[], indvAnOutField: string): any[] {\n    const resultSeries: any[] = [];\n    const seriesSuffixes = indvAnOutField === 'all' ? [' actual', ' expected', ' score', ' anomaly'] : [' ' + indvAnOutField];\n    baselineSeries.forEach(baselineSer => {\n      const seriesName = baselineSer.target;\n      seriesSuffixes.forEach(suffix => {\n        resultSeries.push(\n          seriesToSort.find(s => {\n            return s.target === seriesName + suffix;\n          })\n        );\n      });\n    });\n\n    return resultSeries;\n  }\n\n  static getStdDev(series: number[]) {\n    const min = Math.min(...series);\n    const max = Math.max(...series);\n\n    series = series.map(b => {\n      return (b - min) / (max - min);\n    });\n\n    return series;\n  }\n\n  static findCorrelation(x: any, y: any) {\n    let sumX = 0,\n      sumY = 0,\n      sumXY = 0,\n      sumX2 = 0,\n      sumY2 = 0;\n    const minLength = (x.length = y.length = Math.min(x.length, y.length)),\n      reduce = (xi: any, idx: any) => {\n        const yi = y[idx];\n        sumX += xi;\n        sumY += yi;\n        sumXY += xi * yi;\n        sumX2 += xi * xi;\n        sumY2 += yi * yi;\n      };\n    x.forEach(reduce);\n    return (minLength * sumXY - sumX * sumY) / Math.sqrt((minLength * sumX2 - sumX * sumX) * (minLength * sumY2 - sumY * sumY));\n  }\n\n  static queryBuilder(query: string) {\n    return (\n      query\n        .replace(/{/g, '(') // (?<!(?:\\\\)){ Replace { not followed by \\ with (. Reverting this part as negative lookbehind\n        //pattern doesn't work in Safari  and Solr treats { and ( same.\n        .replace(/}/g, ')') // Replace } not followed by \\ with )\n        .replace(/\\\",\\\"/g, '\" OR \"')\n    );\n  }\n}\n","/*\n *\n *  Copyright (C) 2019 Bolt Analytics Corporation\n *\n *      Licensed under the Apache License, Version 2.0 (the \"License\");\n *      you may not use this file except in compliance with the License.\n *      You may obtain a copy of the License at\n *\n *          http://www.apache.org/licenses/LICENSE-2.0\n *\n *      Unless required by applicable law or agreed to in writing, software\n *      distributed under the License is distributed on an \"AS IS\" BASIS,\n *      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *      See the License for the specific language governing permissions and\n *      limitations under the License.\n *\n */\n\nimport { DataSourcePlugin } from '@grafana/ui';\n\nimport { BoltDatasource } from './datasource';\n\nimport { BoltQueryEditor } from './queryEditor';\nimport { BoltOptions, BoltQuery } from './types';\n\nexport class BoltConfigControl {\n  static templateUrl = 'partials/config.html';\n}\n\nexport const plugin = new DataSourcePlugin<BoltDatasource, BoltQuery, BoltOptions>(BoltDatasource)\n  .setConfigCtrl(BoltConfigControl)\n  .setQueryEditor(BoltQueryEditor);\n","/*\n *\n *  Copyright (C) 2019 Bolt Analytics Corporation\n *\n *      Licensed under the Apache License, Version 2.0 (the \"License\");\n *      you may not use this file except in compliance with the License.\n *      You may obtain a copy of the License at\n *\n *          http://www.apache.org/licenses/LICENSE-2.0\n *\n *      Unless required by applicable law or agreed to in writing, software\n *      distributed under the License is distributed on an \"AS IS\" BASIS,\n *      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *      See the License for the specific language governing permissions and\n *      limitations under the License.\n *\n */\nimport React from 'react';\nimport { PureComponent } from 'react';\n\n// Types\nimport { BoltDatasource } from './datasource';\nimport { BoltQuery, BoltOptions } from './types';\n\nimport { QueryEditorProps, FormField } from '@grafana/ui';\n\ntype Props = QueryEditorProps<BoltDatasource, BoltQuery, BoltOptions>;\n\ninterface State extends BoltQuery {}\n\nexport class BoltQueryEditor extends PureComponent<Props, State> {\n  query: BoltQuery;\n\n  constructor(props: Props) {\n    super(props);\n\n    const { query } = this.props;\n    this.query = query;\n\n    this.state = {\n      ...this.state,\n      query: '/topics/$TOPICNAME/partitions/0/messages',\n      topicName: query.topicName || '',\n    };\n\n    const { onChange } = this.props;\n    onChange({\n      ...this.props.query,\n      ...this.state,\n    });\n  }\n\n  render() {\n    const { topicName } = this.state;\n    const labelWidth = 8;\n\n    return (\n      <div>\n        <div className=\"gf-form-inline\">\n          <div className=\"gf-form\">\n            <div className=\"gf-form\">\n              <FormField\n                label=\"Topic Name\"\n                type=\"text\"\n                value={topicName}\n                labelWidth={labelWidth}\n                width={4}\n                name=\"topicName\"\n                onChange={this.onFieldValueChange}\n              ></FormField>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  onFieldValueChange = (event: any, _name?: string) => {\n    const name = _name ? _name : event.target.name;\n    const value = event.target.value;\n\n    this.setState({\n      ...this.state,\n      [name]: value,\n    });\n\n    const { onChange } = this.props;\n    onChange({\n      ...this.props.query,\n      [name]: value,\n    });\n  };\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__grafana_runtime__;","module.exports = __WEBPACK_EXTERNAL_MODULE__grafana_ui__;","module.exports = __WEBPACK_EXTERNAL_MODULE_lodash__;","module.exports = __WEBPACK_EXTERNAL_MODULE_react__;"],"sourceRoot":""}